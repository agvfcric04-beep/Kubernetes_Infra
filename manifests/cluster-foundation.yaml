# Namespaces for workload separation with Pod Security Standards labels.
apiVersion: v1
kind: Namespace
metadata:
  name: dev
  labels:
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/enforce-version: "latest"
    pod-security.kubernetes.io/audit: restricted
    environment: dev
---
apiVersion: v1
kind: Namespace
metadata:
  name: staging
  labels:
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/enforce-version: "latest"
    pod-security.kubernetes.io/audit: restricted
    environment: staging
---
apiVersion: v1
kind: Namespace
metadata:
  name: prod
  labels:
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/enforce-version: "latest"
    pod-security.kubernetes.io/audit: restricted
    environment: prod
---
# Namespace for platform services (monitoring, logging, security tooling).
apiVersion: v1
kind: Namespace
metadata:
  name: platform
  labels:
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/enforce-version: "latest"
    pod-security.kubernetes.io/audit: baseline
---
# PodDisruptionBudget for CoreDNS to maintain DNS availability during disruptions.
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: coredns-pdb
  namespace: kube-system
spec:
  minAvailable: 2
  selector:
    matchLabels:
      k8s-app: kube-dns
